# 🍽️ 날씨 맞춤 음식점 추천 서비스 - 요구사항 명세서 v1.0

## 📋 문서 정보

| 항목 | 내용 |
|------|------|
| **문서명** | 날씨 맞춤 음식점 추천 서비스 요구사항 명세서 |
| **버전** | 1.0 |
| **작성일** | 2024년 12월 4일 |
| **상태** | 초안 |

---

## 1. 서비스 개요

### 1.1 서비스 컨셉
**"지금 날씨에 딱 맞는 음식점"** - 현재 사용자 위치의 날씨 정보를 기반으로 가장 적합한 음식 종류와 주변 음식점을 추천하는 서비스

### 1.2 핵심 가치
- 🌤️ **날씨 기반 맞춤 추천**: 기온, 습도, 날씨 상태에 따른 음식 추천
- 📍 **위치 기반 서비스**: 사용자 현재 위치 주변의 실제 음식점 정보 제공
- 🎯 **개인화된 경험**: 날씨와 기분에 맞는 음식으로 더 나은 식사 경험

### 1.3 타겟 사용자
- 점심/저녁 메뉴 선택에 고민하는 직장인
- 날씨에 따라 먹고 싶은 음식이 달라지는 사람
- 새로운 음식점을 발견하고 싶은 사람

---

## 2. 활용 API

### 2.1 OpenWeatherMap API

#### 2.1.1 지오코딩 API (Geocoding API)
- **용도**: 도시/지역명을 좌표(위도/경도)로 변환
- **엔드포인트**: `http://api.openweathermap.org/geo/1.0/direct`
- **주요 파라미터**:
  - `q`: 도시명 (필수)
  - `appid`: API 키 (필수)
  - `limit`: 결과 개수 제한 (선택)

#### 2.1.2 현재 날씨 API (Current Weather Data)
- **용도**: 현재 날씨 정보 조회
- **엔드포인트**: `https://api.openweathermap.org/data/2.5/weather`
- **주요 파라미터**:
  - `lat`, `lon`: 위도/경도 (필수)
  - `appid`: API 키 (필수)
  - `units`: 단위 (`metric` 권장)
  - `lang`: 언어 (`ko` 한국어)
- **활용할 응답 필드**:
  - `weather.main`: 날씨 상태 (Rain, Snow, Clouds 등)
  - `weather.description`: 상세 날씨 설명
  - `main.temp`: 현재 기온
  - `main.feels_like`: 체감 온도
  - `main.humidity`: 습도

### 2.2 Google Places API (New)

#### 2.2.1 Text Search API
- **용도**: 날씨에 맞는 음식 종류로 주변 음식점 검색
- **엔드포인트**: `https://places.googleapis.com/v1/places:searchText`
- **요청 방식**: POST
- **주요 파라미터**:
  - `textQuery`: 검색 쿼리 (필수)
  - `locationBias`: 위치 기반 검색 반경
  - `languageCode`: 결과 언어 (`ko`)
  - `includedType`: 장소 유형 (`restaurant`)
  - `openNow`: 현재 영업 중인 곳만 필터링
  - `minRating`: 최소 평점 필터
  - `pageSize`: 결과 개수
- **요청할 필드 마스크**:
  - `places.displayName`: 음식점 이름
  - `places.formattedAddress`: 주소
  - `places.rating`: 평점
  - `places.userRatingCount`: 리뷰 수
  - `places.priceLevel`: 가격대
  - `places.photos`: 사진
  - `places.currentOpeningHours`: 영업 시간
  - `places.websiteUri`: 웹사이트
  - `places.googleMapsUri`: 구글 맵 링크

#### 2.2.2 Place Details API
- **용도**: 선택한 음식점의 상세 정보 조회
- **엔드포인트**: `https://places.googleapis.com/v1/places/{placeId}`
- **요청 방식**: GET
- **추가 활용 필드**:
  - `reviews`: 리뷰
  - `editorialSummary`: 에디토리얼 요약
  - `dineIn`, `takeout`, `delivery`: 서비스 옵션

#### 2.2.3 Place Photos API
- **용도**: 음식점 사진 가져오기
- **엔드포인트**: `https://places.googleapis.com/v1/{photo_name}/media`
- **주요 파라미터**:
  - `maxHeightPx`, `maxWidthPx`: 이미지 크기 (최대 4800px)

---

## 3. 핵심 기능 요구사항

### 3.1 날씨 조회 기능 (FR-001)

| 항목 | 내용 |
|------|------|
| **기능 ID** | FR-001 |
| **기능명** | 현재 위치 날씨 조회 |
| **설명** | 사용자의 현재 위치 또는 입력한 위치의 날씨 정보를 조회 |
| **입력** | 위치 정보 (GPS 좌표 또는 도시명) |
| **출력** | 현재 기온, 체감온도, 습도, 날씨 상태, 날씨 아이콘 |
| **우선순위** | 필수 |

### 3.2 음식 추천 로직 (FR-002)

| 항목 | 내용 |
|------|------|
| **기능 ID** | FR-002 |
| **기능명** | 날씨 기반 음식 추천 |
| **설명** | 날씨 조건에 따라 적합한 음식 종류를 추천 |
| **우선순위** | 필수 |

#### 날씨-음식 매핑 규칙 (예시)

| 날씨 조건 | 추천 음식 카테고리 | 검색 키워드 예시 |
|----------|-------------------|-----------------|
| 🌧️ 비 오는 날 | 따뜻한 국물 요리 | 국밥, 찌개, 라멘, 우동, 수제비 |
| ❄️ 눈 오는 날 | 뜨끈한 전골/탕 | 샤브샤브, 부대찌개, 어묵탕 |
| 🥶 추운 날 (5°C 이하) | 따뜻하고 든든한 음식 | 설렁탕, 감자탕, 삼계탕, 칼국수 |
| 🌡️ 쌀쌀한 날 (5~15°C) | 따뜻한 면요리/밥 | 쌀국수, 짬뽕, 제육볶음, 덮밥 |
| 🌤️ 적당한 날 (15~25°C) | 다양한 선택 | 파스타, 피자, 한식, 분식 |
| 🔥 더운 날 (25°C 이상) | 시원한 음식 | 냉면, 밀면, 초밥, 샐러드 |
| 💧 습한 날 (습도 80% 이상) | 개운한 음식 | 물냉면, 냉모밀, 회, 샐러드 |
| ☀️ 맑은 날 | 테라스/야외 식사 | 브런치, 카페, 베이커리 |

### 3.3 음식점 검색 기능 (FR-003)

| 항목 | 내용 |
|------|------|
| **기능 ID** | FR-003 |
| **기능명** | 주변 음식점 검색 |
| **설명** | 추천된 음식 종류를 기반으로 주변 음식점 검색 |
| **입력** | 추천 음식 키워드, 사용자 위치, 검색 반경 |
| **출력** | 음식점 목록 (이름, 주소, 평점, 가격대, 사진) |
| **필터 옵션** | 현재 영업 중, 최소 평점, 가격대, 거리순/평점순 정렬 |
| **우선순위** | 필수 |

### 3.4 음식점 상세 정보 (FR-004)

| 항목 | 내용 |
|------|------|
| **기능 ID** | FR-004 |
| **기능명** | 음식점 상세 정보 조회 |
| **설명** | 선택한 음식점의 상세 정보 표시 |
| **출력** | 상세 주소, 연락처, 영업시간, 리뷰, 사진 갤러리, 지도 |
| **우선순위** | 필수 |

### 3.5 위치 설정 기능 (FR-005)

| 항목 | 내용 |
|------|------|
| **기능 ID** | FR-005 |
| **기능명** | 사용자 위치 설정 |
| **설명** | GPS 자동 감지 또는 수동 위치 입력 |
| **방식** | 1) 브라우저 Geolocation API, 2) 도시명 검색 입력 |
| **우선순위** | 필수 |

---

## 4. 비기능 요구사항

### 4.1 성능 요구사항

| ID | 요구사항 | 목표 |
|----|---------|------|
| NFR-001 | 페이지 로딩 시간 | 3초 이내 |
| NFR-002 | API 응답 시간 | 2초 이내 |
| NFR-003 | 동시 사용자 | 최소 100명 |

### 4.2 사용성 요구사항

| ID | 요구사항 |
|----|---------|
| NFR-004 | 모바일 반응형 디자인 지원 |
| NFR-005 | 직관적인 UI/UX |
| NFR-006 | 한국어 지원 |

### 4.3 보안 요구사항

| ID | 요구사항 |
|----|---------|
| NFR-007 | API 키 서버사이드 보관 |
| NFR-008 | HTTPS 통신 |

---

## 5. 사용자 시나리오

### 시나리오 1: 기본 사용 흐름

```
1. 사용자가 서비스에 접속한다
2. 시스템이 사용자의 위치 권한을 요청한다
3. 사용자가 위치 권한을 허용한다
4. 시스템이 현재 위치의 날씨를 조회한다
5. 시스템이 날씨에 맞는 음식을 추천한다
6. 시스템이 추천 음식 기반으로 주변 음식점을 검색한다
7. 사용자가 음식점 목록을 확인한다
8. 사용자가 특정 음식점을 선택한다
9. 시스템이 음식점 상세 정보를 표시한다
10. 사용자가 길찾기 또는 전화하기를 선택한다
```

### 시나리오 2: 위치 수동 입력

```
1. 사용자가 서비스에 접속한다
2. 사용자가 위치 권한을 거부한다
3. 사용자가 "강남역"을 검색한다
4. 시스템이 강남역 위치의 날씨를 조회한다
5. (이후 시나리오 1과 동일)
```

### 시나리오 3: 음식 종류 변경

```
1. 사용자가 추천된 음식 외 다른 음식을 원한다
2. 사용자가 음식 카테고리를 변경한다
3. 시스템이 새로운 카테고리로 음식점을 재검색한다
```

---

## 6. 화면 구성 (와이어프레임 개요)

### 6.1 메인 화면
- 현재 위치/날씨 정보 표시 영역
- 추천 음식 카테고리 표시
- 음식점 목록 (카드 형태)
- 필터/정렬 옵션

### 6.2 음식점 상세 화면
- 음식점 사진 갤러리
- 기본 정보 (이름, 주소, 평점, 가격대)
- 영업 시간
- 리뷰 목록
- 지도 미리보기
- 액션 버튼 (전화, 길찾기, 웹사이트)

### 6.3 위치 설정 화면
- 현재 위치 사용 버튼
- 위치 검색 입력창
- 최근 검색 위치 목록

---

## 7. 기술 스택 (권장)

### 7.1 프론트엔드
- **프레임워크**: React 또는 Next.js
- **스타일링**: Tailwind CSS
- **상태관리**: React Query (API 데이터 캐싱)
- **지도**: Google Maps JavaScript API

### 7.2 백엔드
- **런타임**: Node.js
- **프레임워크**: Express.js 또는 Next.js API Routes
- **목적**: API 키 보호를 위한 프록시 서버

### 7.3 배포
- **플랫폼**: Vercel 또는 Netlify
- **환경변수**: API 키 안전 저장

---

## 8. API 요청 예시

### 8.1 날씨 조회 요청
```bash
# 서울의 현재 날씨 조회
curl "https://api.openweathermap.org/data/2.5/weather?lat=37.5665&lon=126.9780&units=metric&lang=ko&appid={API_KEY}"
```

### 8.2 음식점 검색 요청
```bash
curl -X POST "https://places.googleapis.com/v1/places:searchText" \
  -H "Content-Type: application/json" \
  -H "X-Goog-Api-Key: {API_KEY}" \
  -H "X-Goog-FieldMask: places.displayName,places.formattedAddress,places.rating,places.photos,places.priceLevel,places.currentOpeningHours" \
  -d '{
    "textQuery": "국밥 맛집",
    "locationBias": {
      "circle": {
        "center": {"latitude": 37.5665, "longitude": 126.9780},
        "radius": 2000.0
      }
    },
    "languageCode": "ko",
    "openNow": true,
    "pageSize": 10
  }'
```

---

## 9. 향후 확장 기능 (Phase 2)

| 기능 | 설명 |
|------|------|
| 🔮 예보 기반 추천 | 5일 예보를 활용한 미래 날씨 기반 추천 |
| ⭐ 즐겨찾기 | 자주 가는 음식점 저장 |
| 📝 방문 기록 | 날씨별 방문 음식점 히스토리 |
| 🎲 랜덤 추천 | 날씨 조건 내에서 랜덤 음식점 추천 |
| 👥 그룹 추천 | 여러 명의 취향을 고려한 추천 |
| 🔔 날씨 알림 | 특별한 날씨 시 음식 추천 푸시 알림 |

---

## 10. 리스크 및 고려사항

| 리스크 | 대응 방안 |
|--------|----------|
| API 호출 비용 | 결과 캐싱, 요청 최적화, 필요한 필드만 요청 |
| API 호출 제한 | Rate limiting 구현, 사용자별 요청 제한 |
| 위치 권한 거부 | 수동 위치 입력 대안 제공 |
| 날씨-음식 매핑의 주관성 | 사용자 피드백 기반 개선, A/B 테스트 |

---

## 11. 성공 지표 (KPI)

| 지표 | 목표 |
|------|------|
| 일일 활성 사용자 (DAU) | 측정 및 증가 추이 |
| 음식점 클릭률 | 50% 이상 |
| 평균 세션 시간 | 3분 이상 |
| 사용자 재방문율 | 30% 이상 |

---

## 부록 A: 날씨 조건 상세 코드

OpenWeatherMap `weather.main` 값:
- `Clear`: 맑음
- `Clouds`: 구름
- `Rain`: 비
- `Drizzle`: 이슬비
- `Thunderstorm`: 뇌우
- `Snow`: 눈
- `Mist`, `Fog`, `Haze`: 안개/흐림

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 1.0 | 2024-12-04 | 최초 작성 | - |


