# 개발 계획 문서 템플릿

`@follow-development-plan` command가 자동으로 개발 작업을 수행하기 위한 개발 계획 문서 템플릿입니다.

## 기본 구조

```markdown
# 개발 계획: [기능/Feature 제목]

**날짜:** YYYY-MM-DD  
**문서번호:** dev-YYYYMMDD-NN  
**관련 문서:** (선택)
- [참조 문서 이름](경로)

## 1. 개요

[기능의 목적과 범위를 2-3문장으로 요약]

## 2. 상세 요구사항

### 2.1 목표
- [목표 1]
- [목표 2]

### 2.2 주요 구성 요소

1. **[구성 요소 1]**
   - 항목 1: 설명
   - 항목 2: 설명

### 2.3 기술 요구사항

#### 개발 환경
- [환경 요구사항]

#### 핵심 라이브러리
- [라이브러리 목록]

#### API
- [사용할 API]

#### 코드 품질
- [코드 품질 요구사항]

### 2.4 파일 구조

\```
src/
├── [디렉토리]/
│   └── [파일].ts
\```

## 3. 구현 세부사항

### 3.1 [모듈/컴포넌트명]

#### 3.1.1 [세부 항목명]

**파일:** `src/[path]/[file].ts`

\```typescript
export interface InterfaceName {
  // 타입 정의
}

export function functionName(): ReturnType {
  // 함수 구현
}
\```

**구현 요구사항:**
- [요구사항 1]
- [요구사항 2]

## 4. 검증 기준

### 4.1 기능 검증
- [ ] [검증 항목 1]
- [ ] [검증 항목 2]

### 4.2 테스트 검증
- [ ] [테스트 항목 1]
- [ ] [테스트 항목 2]
- [ ] 단위 테스트 작성 및 통과 (`yarn test`)
- [ ] E2E 테스트 작성 및 통과 (`yarn test:e2e`)
- [ ] Contract Testing 작성 및 통과 (외부 API 사용 시, `yarn test:contract`)

### 4.3 코드 품질
- [ ] [품질 항목 1]
- [ ] [품질 항목 2]
- [ ] TypeScript 타입 체크 통과 (`yarn type-check` 또는 `tsc --noEmit`)
- [ ] ESLint 검증 통과 (`yarn lint`)
- [ ] 테스트 커버리지 목표 달성 (기본: 80% 이상)
- [ ] 모든 에러 처리 경로 테스트 포함
- [ ] 타입 정의 중복 없음 확인
- [ ] 에러 메시지 일관성 확인 (중앙화된 에러 처리)

## 5. 의존성

### 5.1 기존 모듈
- `[module]`: [설명]

### 5.2 외부 라이브러리
- `[library]`: [용도]

## 6. 예상 산출물

### 6.1 소스 파일
1. `src/[path]/[file].ts`

### 6.2 테스트 파일
1. 단위 테스트: `src/[path]/__tests__/[file].test.ts`
2. E2E 테스트: `e2e/[feature].spec.ts`
3. Contract Testing: `e2e/[feature].contract.spec.ts` 또는 `src/services/[module]/__tests__/[service].contract.test.ts` (외부 API 사용 시)

### 6.3 문서
1. `docs/history/development/YYYYMMDD/NN-FEATURE-ID/dev-plan.md`

## 7. 참고사항

### 7.1 스펙 문서 참조
- [스펙 문서]: [설명]

### 7.2 기존 구현 참조
- `[file].ts`: [설명]

### 7.3 주의사항
- [주의할 점]

## 8. 구현 순서 (Step 기반 접근)

### Step 1: [Step 이름] - [Step 설명]

#### Phase 1: [Phase 이름] (예상: [시간])
1. [작업 1] (\`[파일 경로]\`)
2. [작업 2] (\`[파일 경로]\`)
3. [작업 3]

**검증 기준:**
- [ ] [검증 항목 1]
- [ ] [검증 항목 2]
- [ ] TypeScript 타입 체크 통과
- [ ] ESLint 검증 통과
- [ ] 관련 단위 테스트 작성 및 통과
- [ ] 관련 E2E 테스트 작성 및 통과 (해당 기능이 사용자 플로우에 포함되는 경우)

#### Phase 2: [Phase 이름] (예상: [시간])
1. [작업 1] (\`[파일 경로]\`)
2. [작업 2]
3. E2E 테스트 작성 (\`e2e/[feature].spec.ts\`) - 기능 구현이 포함된 경우

**검증 기준:**
- [ ] [검증 항목 1]
- [ ] TypeScript 타입 체크 통과
- [ ] ESLint 검증 통과
- [ ] 관련 단위 테스트 작성 및 통과
- [ ] 관련 E2E 테스트 작성 및 통과 (해당 기능이 사용자 플로우에 포함되는 경우)

**Step 1 완료 기준:**
- [ ] [완료 기준 1]
- [ ] [완료 기준 2]
- [ ] **필수 검증 항목 (모든 Step 공통)**
  - [ ] TypeScript 타입 체크 통과 (`yarn type-check` 또는 `tsc --noEmit`)
  - [ ] ESLint 검증 통과 (`yarn lint`)
  - [ ] 단위 테스트 작성 및 통과 (`yarn test`)
  - [ ] 테스트 커버리지 확인 (목표: 80% 이상, 핵심 로직은 100%)
  - [ ] 에러 처리 경로 테스트 포함 확인
  - [ ] 타입 정의 중복 확인 (중복 없음)
  - [ ] 에러 메시지 일관성 확인 (중앙화된 에러 처리 사용)
  - [ ] 상태 관리 구조 확인 (공유 상태는 상위 컴포넌트에서 관리)
- [ ] **E2E 테스트 작성 확인** (기능 구현이 완료된 Step의 경우)
  - [ ] 주요 사용자 플로우 E2E 테스트 작성 (`e2e/[feature].spec.ts`)
  - [ ] E2E 테스트 통과 (`yarn test:e2e`)

---

### Step 2: [Step 이름] - [Step 설명]

#### Phase 3: [Phase 이름] (예상: [시간])
1. [작업 1] (\`[파일 경로]\`)

**검증 기준:**
- [ ] [검증 항목 1]
- [ ] TypeScript 타입 체크 통과
- [ ] ESLint 검증 통과
- [ ] 관련 단위 테스트 작성 및 통과
- [ ] 관련 E2E 테스트 작성 및 통과 (해당 기능이 사용자 플로우에 포함되는 경우)

**Step 2 완료 기준:**
- [ ] [완료 기준 1]
- [ ] **필수 검증 항목 (모든 Step 공통)**
  - [ ] TypeScript 타입 체크 통과 (`yarn type-check` 또는 `tsc --noEmit`)
  - [ ] ESLint 검증 통과 (`yarn lint`)
  - [ ] 단위 테스트 작성 및 통과 (`yarn test`)
  - [ ] E2E 테스트 작성 및 통과 (`yarn test:e2e`) - 기능 구현이 포함된 경우
  - [ ] 테스트 커버리지 확인 (목표: 80% 이상, 핵심 로직은 100%)
  - [ ] 에러 처리 경로 테스트 포함 확인
  - [ ] 타입 정의 중복 확인 (중복 없음)
  - [ ] 에러 메시지 일관성 확인 (중앙화된 에러 처리 사용)
  - [ ] 상태 관리 구조 확인 (공유 상태는 상위 컴포넌트에서 관리)

---

## 9. 예상 소요 시간

### Step 1: [Step 이름]
- Phase 1: [시간]
- Phase 2: [시간]
- **소계: 약 [시간]**

### Step 2: [Step 이름]
- Phase 3: [시간]
- **소계: 약 [시간]**

**총 예상 소요 시간: 약 [시간]**

## 10. 리스크 및 대응 방안 (선택)

### 리스크 1: [리스크 제목]
- **영향**: [영향 설명]
- **대응**: [대응 방안]

---

**작성자:** [작성자]  
**최종 수정일:** YYYY-MM-DD
```

## 필수 섹션

### 1. 문서 헤더
- 제목: `# 개발 계획: [제목]`
- 날짜: `**날짜:** YYYY-MM-DD`
- 문서번호: `**문서번호:** dev-YYYYMMDD-NN`
- 관련 문서: (선택)

### 2. 개요
- 기능의 목적과 범위 요약

### 3. 상세 요구사항
- 목표
- 주요 구성 요소
- 기술 요구사항
- 파일 구조

### 4. 구현 세부사항
- 각 모듈/컴포넌트별 상세 구현 내용
- 파일 경로 명시
- 코드 예시 (타입 정의, 함수 시그니처 등)
- 구현 요구사항

### 5. 검증 기준
- 기능 검증
- 테스트 검증
- 코드 품질

### 6. 의존성
- 기존 모듈
- 외부 라이브러리

### 7. 예상 산출물
- 소스 파일
- 테스트 파일
- 문서

### 8. 참고사항
- 스펙 문서 참조
- 기존 구현 참조
- 주의사항

### 9. 구현 순서 (필수)
- Step 구조: `### Step N: [이름] - [설명]`
- Phase 구조: `#### Phase N: [이름] (예상: [시간])`
- 작업 목록: 번호가 매겨진 작업 목록 (파일 경로 포함)
- 검증 기준: `**검증 기준:**` 섹션
- Step 완료 기준: `**Step N 완료 기준:**` 섹션 (선택)

### 10. 예상 소요 시간
- Step별 소요 시간
- 총 소요 시간

### 11. 리스크 및 대응 방안 (선택)
- 리스크 목록 및 대응 방안

### 12. 최종 완료 검증 (필수)
- 코드 품질 검증 (TypeScript, ESLint, 빌드)
- 테스트 검증 (단위 테스트, E2E 테스트, 커버리지, Contract Testing)
- 코드 구조 검증 (타입 중복, 에러 처리, 상태 관리)
- 문서화 검증
- 기능 검증

## Step/Phase 구조 규칙

### Step 구조
```markdown
### Step N: [Step 이름] - [Step 설명]
```

### Phase 구조
```markdown
#### Phase N: [Phase 이름] (예상: [시간])
1. [작업 설명] (`[파일 경로]`)
2. [작업 설명] (`[파일 경로]`)

**검증 기준:**
- [ ] [검증 항목]
```

### 작업 목록 작성 규칙

1. **파일 경로 포함**: 작업 항목에 파일 경로를 백틱으로 감싸서 명시
   - 예: `타입 정의 (\`types/weather.ts\`, \`types/errors.ts\`)`
   - 예: `Geolocation API 래퍼 함수 구현 (\`lib/geolocation.ts\`)`
   - 예: `E2E 테스트 작성 (\`e2e/weather.spec.ts\`)`

2. **순서 명확**: 작업 순서가 중요할 경우 번호로 명시

3. **구체적 설명**: 각 작업이 무엇을 하는지 명확히 설명

4. **테스트 작성**: 기능 구현이 완료된 Phase나 Step에는 단위 테스트와 E2E 테스트 작성 작업을 포함해야 합니다.
   - 기능 구현 작업과 함께 또는 바로 다음에 테스트 작성 작업을 추가
   - 예: `단위 테스트 작성 (\`src/[path]/__tests__/[file].test.ts\`)`
   - 예: `E2E 테스트 작성 (\`e2e/[feature].spec.ts\`)`

### 검증 기준 작성 규칙

1. **체크리스트 형식**: `- [ ]` 형식 사용
2. **검증 가능**: 실제로 검증할 수 있는 항목으로 작성
3. **구체적**: 모호하지 않게 구체적으로 작성
4. **필수 검증 항목 포함**: 각 Phase와 Step의 검증 기준에는 다음 필수 항목이 자동으로 포함됩니다:
   - TypeScript 타입 체크 통과
   - ESLint 검증 통과
   - 관련 단위 테스트 작성 및 통과
   - 관련 E2E 테스트 작성 및 통과 (해당 기능이 사용자 플로우에 포함되는 경우)

## 구현 세부사항 작성 규칙

각 모듈/컴포넌트별로 다음 정보를 포함:

1. **파일 경로**: `**파일:** src/[path]/[file].ts`
2. **코드 예시**: 타입 정의, 함수 시그니처 등
3. **구현 요구사항**: 구체적인 구현 요구사항 목록

이 정보는 `@follow-development-plan` command가 실제 코드를 작성할 때 참조합니다.

## 주의사항

1. **파일 경로 명시**: 작업 목록에 반드시 파일 경로를 포함해야 합니다.
2. **구현 세부사항 필수**: 각 파일/모듈에 대한 구현 세부사항을 "구현 세부사항" 섹션에 작성해야 합니다.
3. **검증 기준 명확**: 검증 기준은 실제로 검증 가능한 항목으로 작성해야 합니다.
4. **Step/Phase 구조**: `@follow-development-plan` command가 자동으로 작업을 수행하려면 Step/Phase 구조가 필수입니다.
5. **필수 검증 단계 준수**: 각 Step 완료 시 "필수 검증 항목"을 반드시 확인해야 합니다.
6. **테스트 작성**: 기능 구현이 완료된 Step에서는 단위 테스트와 E2E 테스트를 모두 작성해야 합니다.
7. **테스트 커버리지**: 테스트 커버리지는 구현 중간에도 확인하여 목표 미달 시 추가 테스트를 작성해야 합니다.
8. **에러 처리**: 에러 처리 경로는 반드시 테스트에 포함해야 합니다.
9. **테스트 계층 구조**: 단위 테스트, E2E 테스트, Contract Testing을 모두 고려하여 작성해야 합니다.

## 예시

실제 사용 예시는 `docs/history/development/20251203/01-FS-1.1/dev-plan.md`를 참고하세요.
