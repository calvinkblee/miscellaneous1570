# 📄 DocScan Pro - HTML 문서 자동 분석 서비스

HTML 파일을 업로드하면 AI가 자동으로 **제목**, **주요 내용 요약**, **태그**, **컬렉션 분류**를 생성하고, **문서 간 관계 분석**, **질문 답변** 기능까지 제공하는 올인원 문서 관리 서비스입니다.

---

## 🚀 빠른 시작

### 1. API 키 설정

`.env.local` 파일에 OpenAI API 키를 입력하세요:

```bash
# .env.local
OPENAI_API_KEY=sk-your-actual-api-key-here
```

### 2. 서버 실행

```bash
cd /Users/calvinsbrain/Dev/docscan
node server.js
```

### 3. 브라우저에서 열기

```
http://localhost:3000
```

---

## ✨ 주요 기능

### 📁 문서 분석
- 🗂️ **폴더/파일 업로드** - 드래그 앤 드롭 또는 클릭으로 HTML 파일/폴더 업로드
- 🤖 **AI 자동 분석** - OpenAI GPT-4o-mini를 활용한 문서 분석
- 📝 **제목/요약/태그 추출** - 문서 내용 기반 자동 생성
- 📚 **스마트 컬렉션** - IR자료, 기술문서, 교육 등 자동 분류

### 🔗 문서 관계 분석
- 🔍 **유사도 분석** - 태그/키워드 기반 문서 유사도 계산
- 🗺️ **관계도 시각화** - 문서 간 연결 관계를 그래프로 표시
- 📊 **중복 문서 감지** - 70% 이상 유사한 문서 자동 표시

### 💬 문서에 질문하기 (Chat)
- 업로드된 문서 전체를 대상으로 **자연어 질문**
- 답변에 **출처 문서 표시**
- 예: "우리 회사 ARR 목표가 뭐야?", "주요 경쟁사는?"

### 📊 다중 뷰 모드
| 뷰 | 설명 |
|----|------|
| 📇 **카드 뷰** | 빠른 훑어보기 (기본) |
| 📋 **테이블 뷰** | 정렬/비교 가능 |
| 🗺️ **관계도 뷰** | 문서 연결 시각화 |
| 📅 **타임라인 뷰** | 날짜별 정렬 |

### 📈 통계 & 분석
- 📊 **키워드 통계** - 가장 많이 등장한 키워드
- 📁 **컬렉션 분포** - 문서 분류 현황
- 🔢 **전체 통계** - 문서 수, 태그 수, 유사 문서 수

### 📥 다양한 내보내기
| 형식 | 용도 |
|------|------|
| **JSON** | 구조화된 데이터 |
| **CSV** | 엑셀 호환 |
| **Notion** | 노션 데이터베이스 Import용 |
| **Obsidian** | 마크다운 + 내부 링크 |
| **Markdown** | 목차 형태 |

### 🎨 기타 기능
- 🌙 **다크 모드** - 눈 편한 다크 테마
- ⭐ **즐겨찾기** - 중요 문서 표시
- 🔍 **검색 & 필터** - 태그/컬렉션별 필터링
- 💾 **자동 저장** - 브라우저 로컬 스토리지에 결과 저장

---

## 🚀 시작하기

### 1. 실행 방법

```bash
# 브라우저로 직접 열기
cd /Users/calvinsbrain/Dev/docscan
open index.html

# 또는 Live Server 사용 (권장)
npx live-server
```

### 2. 사용 순서

1. **OpenAI API 키** 입력 (좌측 사이드바)
   - [OpenAI API Keys](https://platform.openai.com/api-keys)에서 발급
   
2. **HTML 파일/폴더** 업로드
   - 드래그 앤 드롭 또는 버튼 클릭
   
3. **자동 분석** 완료 후 결과 확인
   - 카드 클릭으로 상세 보기
   - 뷰 전환으로 다양한 방식 확인
   
4. **질문하기** (우측 채팅 패널)
   - 문서 내용에 대한 질문 입력
   
5. **내보내기**
   - 원하는 형식으로 다운로드

---

## 📁 프로젝트 구조

```
docscan/
├── index.html    # 메인 HTML (3-컬럼 레이아웃)
├── style.css     # 전체 스타일 (다크모드 포함)
├── app.js        # 핵심 로직 (1300+ lines)
└── README.md     # 이 파일
```

---

## 🛠️ 기술 스택

| 영역 | 기술 |
|------|------|
| 프론트엔드 | Vanilla JavaScript (ES6+), CSS3 |
| 스타일링 | CSS Variables, Grid, Flexbox |
| 시각화 | Canvas API (관계도) |
| HTML 파싱 | 브라우저 내장 DOMParser |
| AI 분석 | OpenAI GPT-4o-mini API |
| 데이터 저장 | LocalStorage |

---

## 💡 작동 원리

### 문서 분석 파이프라인

```
1. 파일 업로드
   ↓
2. HTML 파싱 (DOMParser)
   - title, h1~h3, meta 태그 추출
   - 본문 텍스트 추출 (script, style 제외)
   ↓
3. AI 분석 (OpenAI API)
   - 제목 최적화
   - 2-3문장 요약 생성
   - 태그 3-5개 추출
   - 컬렉션 분류
   - 핵심 키워드 추출
   ↓
4. 유사도 계산
   - 태그 오버랩 (20점/개)
   - 같은 컬렉션 (25점)
   - 키워드 오버랩 (15점/개)
   - 제목 단어 오버랩 (10점/개)
   ↓
5. 렌더링 & 저장
```

### 채팅 시스템

```
사용자 질문
   ↓
문서 컨텍스트 수집 (상위 10개 문서 요약)
   ↓
GPT-4o-mini에 질문 + 컨텍스트 전송
   ↓
답변 + 출처 표시
```

---

## ⚠️ 제한 사항

- **로컬 파일 접근**: 브라우저 보안상 드래그 앤 드롭/파일 선택 필수
- **API 비용**: OpenAI API 사용량에 따른 비용 발생
- **파일 크기**: 큰 HTML 파일은 처음 5,000자만 분석
- **유사도 계산**: 100개 이상 문서 시 성능 저하 가능

---

## 🔮 향후 개선 계획

- [ ] IndexedDB로 대용량 저장 지원
- [ ] 드래그 앤 드롭으로 컬렉션 수동 정리
- [ ] Markdown, TXT, PDF 파일 지원
- [ ] 버전 관리 & 변경 추적
- [ ] 폴더 Watch 모드 (자동 감지)
- [ ] 브라우저 확장 프로그램

---

## 📸 스크린샷

### 메인 화면 (카드 뷰)
```
┌─────────────┬──────────────────────────────┬─────────────┐
│   사이드바   │         카드 그리드          │   채팅      │
│  - API 키   │  ┌─────┐ ┌─────┐ ┌─────┐   │   패널     │
│  - 업로드   │  │문서1│ │문서2│ │문서3│   │            │
│  - 컬렉션   │  └─────┘ └─────┘ └─────┘   │  💬 질문   │
│  - 태그     │  ┌─────┐ ┌─────┐ ┌─────┐   │            │
│             │  │문서4│ │문서5│ │문서6│   │            │
└─────────────┴──────────────────────────────┴─────────────┘
```

### 관계도 뷰
```
        ○ IR자료 v1
       / \
      /   \
     ○     ○ 시장분석
     │
     ○ IR자료 v2
```

---

## 📄 라이선스

MIT License

---

Made with ❤️ for document organization | DocScan Pro v2.0
