# 📖 US-002: 특정 위치 검색으로 음식점 추천받기

## 📋 문서 정보

| 항목 | 내용 |
|------|------|
| **User Story ID** | US-002 |
| **버전** | 1.0 |
| **작성일** | 2024년 12월 4일 |
| **상태** | 📝 작성완료 |

---

## 🎯 User Story

> **사용자로서**, 특정 위치(강남역, 홍대 등)를 검색해서 그 지역의 날씨에 맞는 음식점을 추천받고 싶다.  
> **왜냐하면**, 약속 장소 근처에서 미리 음식점을 알아보고 싶기 때문이다.

---

## 👤 페르소나

| 항목 | 내용 |
|------|------|
| **이름** | 이약속 |
| **나이** | 28세 |
| **직업** | 대학원생 |
| **상황** | 내일 강남에서 친구 만남, 미리 음식점을 알아보고 싶음 |
| **니즈** | 약속 장소 근처의 날씨와 음식점을 미리 확인하고 싶음 |

---

## 📝 시나리오 상세

### 사전 조건 (Preconditions)
- 사용자가 서비스에 접속한 상태
- 인터넷 연결이 가능한 상태

### 기본 흐름 (Basic Flow)

```
1. 사용자가 메인 화면의 "위치 직접 입력" 버튼을 탭한다
2. 시스템이 위치 검색 화면을 표시한다
3. 사용자가 검색창에 "강남역"을 입력한다
4. 시스템이 입력과 일치하는 위치 후보를 표시한다
   - 예: 강남역 (서울 강남구), 강남역 3번출구 등
5. 사용자가 원하는 위치를 선택한다
6. 시스템이 선택한 위치의 좌표를 저장한다
7. 시스템이 해당 위치의 날씨를 조회한다
8. 시스템이 메인 화면으로 돌아와 날씨와 음식점을 표시한다
9. (US-001의 기본 흐름 6번 이후와 동일)
```

### 대안 흐름 (Alternative Flows)

#### A1: 현재 위치 사용으로 전환
```
2a. 사용자가 "현재 위치 사용" 버튼을 탭한다
2b. 시스템이 위치 권한을 요청한다
2c. (US-001의 기본 흐름으로 전환)
```

#### A2: 최근 검색 위치 선택
```
2a. 시스템이 최근 검색한 위치 목록을 표시한다
2b. 사용자가 최근 검색 위치 중 하나를 선택한다
2c. (기본 흐름 6번으로 이동)
```

#### A3: 검색 결과 없음
```
4a. 검색어와 일치하는 위치가 없다
4b. 시스템이 "검색 결과가 없습니다" 표시
4c. 시스템이 다른 검색어 입력을 안내한다
```

### 예외 흐름 (Exception Flows)

#### E1: 지오코딩 API 오류
```
4a. 위치 검색 API 호출이 실패한다
4b. 시스템이 "위치를 검색할 수 없습니다" 에러 표시
4c. 시스템이 재시도 버튼을 제공한다
```

#### E2: 잘못된 위치 선택
```
7a. 선택한 위치의 날씨를 조회할 수 없다 (예: 바다 한가운데)
7b. 시스템이 "해당 위치의 날씨를 조회할 수 없습니다" 표시
7c. 시스템이 다른 위치 선택을 안내한다
```

---

## ✅ 인수 조건 (Acceptance Criteria)

### AC-1: 위치 검색 화면
- [ ] "위치 직접 입력" 버튼 클릭 시 검색 화면이 표시된다
- [ ] 검색창이 자동 포커스되어 바로 입력 가능하다
- [ ] 최근 검색 위치가 최대 5개까지 표시된다

### AC-2: 위치 자동완성
- [ ] 2글자 이상 입력 시 자동완성 결과가 표시된다
- [ ] 자동완성 결과에 위치명과 상세 주소가 표시된다
- [ ] 검색 결과가 500ms 이내에 표시된다

### AC-3: 위치 선택
- [ ] 위치 선택 시 해당 좌표가 저장된다
- [ ] 선택한 위치가 최근 검색 목록에 추가된다
- [ ] 위치 선택 후 메인 화면으로 자동 이동한다

### AC-4: 현재 위치 전환
- [ ] "현재 위치 사용" 버튼이 검색 화면에 표시된다
- [ ] 버튼 클릭 시 GPS 위치 획득이 시작된다

### AC-5: 에러 처리
- [ ] 검색 결과 없음 시 안내 메시지가 표시된다
- [ ] API 오류 시 에러 메시지와 재시도 버튼이 표시된다

---

## 🔗 관련 기능 명세

| 기능 ID | 기능명 | 역할 |
|---------|--------|------|
| [FR-005](../features/FR-005.md) | 사용자 위치 설정 | 위치 검색 및 선택 |
| [FR-001](../features/FR-001.md) | 현재 위치 날씨 조회 | 선택한 위치의 날씨 조회 |
| [FR-002](../features/FR-002.md) | 날씨 기반 음식 추천 | 날씨→음식 매핑 |
| [FR-003](../features/FR-003.md) | 주변 음식점 검색 | 선택한 위치 기반 검색 |

---

## 🎨 UI/UX 참조

- [design_system.md](../../design_system.md)
  - 섹션 6.3: 입력 필드 스타일
  - 섹션 10: 애니메이션 & 인터랙션

### 화면 구성 요소

```
┌─────────────────────────────────────┐
│  ← 위치 검색                         │  ← 헤더
├─────────────────────────────────────┤
│  🔍 [검색어를 입력하세요        ]    │  ← 검색 입력창
├─────────────────────────────────────┤
│  📍 현재 위치 사용                   │  ← 현재 위치 버튼
├─────────────────────────────────────┤
│  최근 검색                           │
│  ├── 강남역 (서울 강남구)            │
│  ├── 홍대입구역 (서울 마포구)        │
│  └── 판교역 (경기 성남시)            │
├─────────────────────────────────────┤
│  검색 결과 (입력 시 표시)            │
│  ├── 강남역 - 서울 강남구 역삼동     │
│  ├── 강남역 3번출구 - 서울 강남구    │
│  └── 강남역 사거리 - 서울 강남구     │
└─────────────────────────────────────┘
```

---

## 🛠️ 개발 참조

- [DEVELOPMENT_GUIDE.md](../../DEVELOPMENT_GUIDE.md)
  - 섹션 3.2: React 컴포넌트 규칙
  - 섹션 4.1: 컴포넌트 구조 패턴
  - 섹션 9.3: API 서비스 구조

### 활용 API

| API | 용도 | 문서 |
|-----|------|------|
| OpenWeatherMap Geocoding | 도시명 → 좌표 변환 | [api_docs/open_weather_api.md](../../api_docs/open_weather_api.md) |

---

## 📊 테스트 시나리오

| ID | 시나리오 | 예상 결과 |
|----|---------|----------|
| TC-001 | "강남역" 검색 | 관련 위치 목록 표시 |
| TC-002 | 위치 선택 후 확인 | 메인 화면에 해당 위치 날씨 표시 |
| TC-003 | 최근 검색 위치 선택 | 해당 위치로 바로 이동 |
| TC-004 | 현재 위치 사용 클릭 | GPS 권한 요청 팝업 표시 |
| TC-005 | 존재하지 않는 위치 검색 | "검색 결과 없음" 표시 |
| TC-006 | 네트워크 오류 상황 | 에러 메시지 및 재시도 버튼 표시 |

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 1.0 | 2024-12-04 | 최초 작성 | - |


